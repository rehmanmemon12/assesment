<!-- Header -->
<header class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Search Bar -->
            <div class="flex-1 max-w-md">
                <div class="relative search-container">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center cursor-pointer"
                        (click)="enterPresEvent()">
                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <form [formGroup]="searchForm">
                        <input type="text"
                            class="search-input block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            placeholder="Search keywords..." formControlName="searchValue"
                            (keyup.enter)="enterPresEvent()" />
                        @if (this.searchForm.getRawValue().searchValue.length > 0){
                        <div class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer"
                            (click)="resetSearch()">
                            <mat-icon class="text-gray-400 hover:text-gray-600">close</mat-icon>
                        </div>
                        }
                    </form>
                </div>
            </div>

            <!-- User Info -->
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <button class="p-2 rounded-full hover:bg-gray-100">
                        <mat-icon>notifications</mat-icon>
                    </button>
                </div>
                <div class="flex items-center space-x-2">
                    <button class="p-2 rounded-full hover:bg-gray-100 relative" [matMenuTriggerFor]="userMenu"
                        #menuTrigger="matMenuTrigger">
                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </button>

                    <!-- User Menu -->
                    <mat-menu #userMenu="matMenu" class="user-dropdown">
                        <!-- User Info Header -->
                        <div class="user-menu-header px-4 py-3">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="user-avatar w-10 h-10 rounded-full flex items-center justify-center">
                                        <mat-icon>account_circle</mat-icon>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <div class="text-sm font-medium text-gray-900">{{userInfo().name}}</div>
                                    <div class="text-sm text-gray-500">{{userInfo().role}}</div>
                                    <div class="text-xs text-gray-400">{{userInfo().clinic}}</div>
                                </div>
                            </div>
                        </div>

                        <!-- Menu Items -->
                        <button mat-menu-item (click)="onSettings()" class="menu-item">
                            <mat-icon class="text-gray-400">settings</mat-icon>
                            Settings
                        </button>

                        <button mat-menu-item (click)="onAdminPanel()" class="menu-item">
                            <mat-icon class="text-gray-400">admin_panel_settings</mat-icon>
                            Open the admin panel
                        </button>

                        <div class="menu-separator"></div>

                        <button mat-menu-item (click)="onLogout()" class="menu-item">
                            <mat-icon class="text-gray-400">logout</mat-icon>
                            Log out
                        </button>
                    </mat-menu>

                </div>
            </div>
        </div>
    </div>
</header>
